<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Login - TokoKu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing:border-box; margin:0; padding:0; font-family: Arial, sans-serif; }
    body {
      min-height:100vh;
      background: radial-gradient(circle at top, #1d4ed8, #020617);
      display:flex; align-items:center; justify-content:center;
      color:#e5e7eb;
    }
    .card {
      width: 380px;
      max-width: 100%;
      background: rgba(15,23,42,0.96);
      border-radius: 18px;
      padding: 30px 26px 24px;
      box-shadow: 0 25px 60px rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.35);
    }
    .title { text-align:center; font-size:24px; margin-bottom:6px; }
    .subtitle { text-align:center; font-size:13px; color:#9ca3af; margin-bottom:22px; }
    .label { font-size:13px; margin-bottom:6px; display:block; }
    .input {
      width:100%;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid #020617;
      background:#020617;
      color:#e5e7eb;
      font-size:13px;
      margin-bottom:14px;
    }
    .input:focus { outline:none; border-color:#3b82f6; }
    .btn-primary {
      width:100%;
      padding:10px 14px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-size:14px;
      color:#fff;
      background: linear-gradient(135deg,#38bdf8,#2563eb);
      margin-top:4px;
    }
    .bottom-text {
      margin-top: 12px;
      text-align:center;
      font-size:12px;
      color:#9ca3af;
    }
    .link { color:#38bdf8; cursor:pointer; }
    .error { font-size:12px; color:#f97373; margin-bottom:8px; }
    .brand {
      text-align:center;
      font-weight:700;
      color:#e5e7eb;
      letter-spacing:0.08em;
      margin-bottom:10px;
    }
    .brand span { color:#38bdf8; }
  </style>
</head>
<body>
  <div class="card">
    <div class="brand">Toko<span>Fra</span></div>
    <h1 class="title">Masuk</h1>
    <p class="subtitle">
      Login dengan email dan password yang sudah kamu daftarkan.
    </p>

    <div id="errorBox" class="error" style="display:none;"></div>

    <label class="label" for="email">Email</label>
    <input id="email" class="input" type="email" placeholder="email@kamu.com" />

    <label class="label" for="password">Password</label>
    <input id="password" class="input" type="password" placeholder="••••••••" />

    <!-- LINK LUPA PASSWORD BARU -->
    <div style="text-align:right; font-size:12px; margin-top:-6px; margin-bottom:10px;">
      <span class="link" onclick="goToForgot()">Lupa password?</span>
    </div>

    <button class="btn-primary" onclick="handleLogin()">Masuk</button>

    <div class="bottom-text">
      Belum punya akun?
      <span class="link" onclick="location.href='register.html'">Daftar dulu</span>
    </div>
  </div>

  <script>
    // Kalau sudah login, tidak perlu ke halaman login lagi
    if (localStorage.getItem("isLoggedIn") === "true") {
      window.location.href = "index.html";
    }

    function handleLogin() {
      const email = document.getElementById("email").value.trim().toLowerCase();
      const pass  = document.getElementById("password").value;
      const errorBox = document.getElementById("errorBox");

      errorBox.style.display = "none";
      errorBox.textContent = "";

      if (!email || !pass) {
        errorBox.textContent = "Email dan password wajib diisi.";
        errorBox.style.display = "block";
        return;
      }

      const usersRaw = localStorage.getItem("users") || "[]";
      const users = JSON.parse(usersRaw);
      const user = users.find(u => u.email === email && u.password === pass);

      if (!user) {
        errorBox.textContent = "Email atau password salah, atau belum terdaftar.";
        errorBox.style.display = "block";
        return;
      }

      // set status login & data user aktif
      localStorage.setItem("isLoggedIn", "true");
      localStorage.setItem("userName", user.name);
      localStorage.setItem("userEmail", user.email);

      window.location.href = "index.html";
    }

    // Arahkan ke halaman lupa password
    function goToForgot() {
      // Di halaman ini nanti user diminta ketik Gmail yang terdaftar,
      // lalu diarahkan untuk cek Gmail dan lanjut ke reset password.
      location.href = "forgot.html";
    }
  </script>
</body>
</html>
